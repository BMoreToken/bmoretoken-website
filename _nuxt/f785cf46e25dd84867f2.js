(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{889:function(e,t,r){"use strict";r.r(t);r(73),r(56),r(38),r(45),r(223);var n=r(1),o=(r(102),r(126),r(150),r(91),r(92),r(74),r(35),r(447),r(41),r(0)),c=r(90),d=r.n(c),m=r(275),l=r.n(m),f=r(282),h=r.n(f),w=r(283),v=r.n(w),k=r(284),E=r.n(k),T=r(5),x=r(66),A=r(4);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S,P,N,I,y,R=function(e){var t=e.newAccount;(0,e.commit)("IDENTIFY",Object(T.toChecksumAddress)(t[0]))},j={netId:function(e){return e.netId},isApiValible:function(e){return 1==e.netId},networkName:function(e){return x.a["netId".concat(e.netId)].networkName},currency:function(e){return x.a["netId".concat(e.netId)].currencyName},networkConfig:function(e){return x.a["netId".concat(e.netId)]},getEthereumProvider:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,d,m,f,w,k,T,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.providerName,o=e.networkName,t.t0=n,t.next="portis"===t.t0?4:"fortmatic"===t.t0?10:"squarelink"===t.t0?13:"walletConnect"===t.t0?18:"walletLink"===t.t0?26:(t.t0,39);break;case 4:if(!window.portis){t.next=8;break}return t.abrupt("return",window.portis.provider);case 8:return window.portis=new h.a("",o),t.abrupt("return",window.portis.provider);case 10:return c=new E.a("pk_live_16BBFE98905B1AA1"),t.abrupt("return",c.getProvider());case 13:return d=new v.a("",o),t.next=16,d.getProvider();case 16:return m=t.sent,t.abrupt("return",m);case 18:return t.next=20,Promise.resolve().then(r.t.bind(null,348,7));case 20:return f=t.sent,w=f.default,k=new w({rpc:{1:"https://api.mycryptoapi.com/eth"}}),window.walletProvider=k,t.abrupt("return",k);case 26:if(!window.walletLink){t.next=30;break}return t.abrupt("return",window.walletLink);case 30:return"Token Bulksender","https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png","https://api.mycryptoapi.com/eth",1,T=new l.a({appName:"Token Bulksender",appLogoUrl:"https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png",darkMode:!1}),x=T.makeWeb3Provider("https://api.mycryptoapi.com/eth",1),window.walletLink=x,t.abrupt("return",x);case 38:return t.abrupt("break",40);case 39:return t.abrupt("return",window.ethereum);case 40:case"end":return t.stop()}}),t)})))},customRPCProvider:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},web3:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEthereumProvider();case 2:return r=e.sent,e.abrupt("return",Object.freeze(new d.a(r)));case 4:case"end":return e.stop()}}),e)})))},customRPCWeb3:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",Object.freeze(new d.a(n)));case 3:case"end":return e.stop()}}),e)})))}},C={IDENTIFY:function(e,t){e.ethAccount=t},SET_NET_ID:function(e,t){t=parseInt(t,10),e.netId=t},SET_BALANCE:function(e,t){e.balance=Object(T.fromWei)(t)},SET_WALLET_STATE:function(e,t){e.walletState=t},SET_ADDRESS:function(e,t){var address=t.address,r=t.valid,n=void 0!==r&&r;e.address={value:address,valid:n}},SAVE_GAS_PRICE:function(e,t){e.gasPrice=t},SAVE_TOKENS:function(e,t){e.tokens=t},SET_TOKEN_ADDRESS:function(e,t){e.tokenAddress=t},SET_FETCHING:function(e,t){e.isFetching=t},SET_PROVIDER_NAME:function(e,t){e.providerName=t},SET_NETWORK_NAME:function(e,t){e.networkName=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_IS_IMTOKEN:function(e,t){e.isImToken=t},SET_IS_TRUSTWALLET:function(e,t){e.isTrustWallet=t},SET_WALLET_NAME:function(e,t){e.walletName=t}},L={setAddress:function(e,t){e.dispatch;var r=e.commit,address=t.address;r("SET_ADDRESS",{address:address,valid:address.length>=42&&Object(T.isAddress)(address)})},setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setWalletName:function(e,t){var r=e.dispatch,n=e.commit,o=t.walletName;n("SET_WALLET_NAME",o),r("common/saveLastUsedWalletName",{walletName:o},{root:!0})},onNetworkChanged:function(e,t){(0,e.commit)("SET_NET_ID",t.netId)},closeProvider:(y=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,n=t.getters,o=t.commit,c=r.providerName,e.next=4,n.getEthereumProvider();case 4:d=e.sent,e.t0=c,e.next="walletConnect"===e.t0||"walletLink"===e.t0?8:10;break;case 8:return e.next=10,d.close();case 10:return e.abrupt("break",11);case 11:return o("IDENTIFY",null),o("SET_PROVIDER_NAME",""),o("SET_WALLET_NAME",""),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)}),getBalance:function(e){var t=e.dispatch,r=e.state,n=e.getters.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,c){var d=function(){var m=Object(o.a)(regeneratorRuntime.mark((function o(m){var l,f,h,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=m.retryAttempt,f=void 0===l?1:l,f++,o.prev=2,h={method:"eth_getBalance",params:[r.ethAccount,"latest"]},o.next=6,t("metamask/sendAsync",h,{root:!0});case 6:w=o.sent,e(w),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),f>=n?c(o.t0):d({retryAttempt:f});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();d({})}))},askPermission:function(e,t){var r=e.commit,n=e.dispatch,c=e.getters,d=(e.state,t.providerName),m=t.networkName;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,o){var l,f,h,w,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROVIDER_NAME",d),r("SET_NETWORK_NAME",m),r("SET_INITIALIZED",!1),e.next=5,c.getEthereumProvider();case 5:return l=e.sent,e.prev=6,null==l&&(r("SET_WALLET_STATE",-1),o(new Error("Please Install Metamask"))),f=[],e.prev=9,e.next=12,l.enable();case 12:f=e.sent,e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(9),console.info(e.t0),e.next=20,l.send("eth_requestAccounts");case 20:f=e.sent;case 21:return 0===f.length&&(r("SET_WALLET_STATE",-2),o(new Error("lockedMetamask"))),h=Object(T.toChecksumAddress)(f[0]),r("IDENTIFY",h),n("setAddress",{address:h}),e.next=27,n("getBalance");case 27:return w=e.sent,w=Object(T.hexToNumberString)(w),n("saveUserBalance",{balance:w}),e.next=32,n("sendAsync",{method:"net_version",params:[],callbackAction:"metamask/onNetworkChanged"});case 32:v=e.sent,n("onNetworkChanged",{netId:v});try{(window.imToken||window.ethereum.isImToken)&&r("SET_IS_IMTOKEN",!0),null!=window.trustProvider&&r("SET_IS_TRUSTWALLET",!0),l.on&&(l.on("accountsChanged",(function(e){return R({dispatch:n,commit:r,newAccount:e})})),l.on("networkChanged",(function(e){return n("onNetworkChanged",{netId:e})})),l.on("open",(function(){console.info("open")})),l.on("close",(function(code,e){console.info(code,e)})))}catch(e){console.info(e)}return r("SET_INITIALIZED",!0),n("common/saveLastUsedProviderName",{providerName:d},{root:!0}),e.next=39,n("fetchTokenList",{});case 39:n("bulksender/initBaseParams",{},{root:!0}),n("common/initBaseParams",{},{root:!0}),n("token/initBaseParams",{},{root:!0}),t({netId:v,ethAccount:f[0]}),e.next=48;break;case 45:e.prev=45,e.t1=e.catch(6),o(e.t1);case 48:case"end":return e.stop()}}),e,null,[[6,45],[9,15]])})));return function(t,r){return e.apply(this,arguments)}}())},saveUserBalance:function(e,t){(0,e.commit)("SET_BALANCE",t.balance)},fetchTokenList:(I=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d,m,l,f,h,w,v,k,E,T,x,_,O,S,P,N,I,y,R,j,C,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,d=t.rootGetters,t.state,m=r.oracleIndex,l=void 0===m?0:m,(f=d["metamask/networkConfig"]).smartContractPollTime,f.gasPrice,h=f.tokenOracleUrls,w=f.currencyName,v=f.networkName,k=f.specialTokenList,E=n.metamask,T=E.netId,E.isFetching,x=E.ethAccount,E.tokens,_=E.balance,O=E.ethCoinName,S=n.common.language,1!=T){e.next=41;break}return e.prev=6,P=h[l%h.length],(N=P.indexOf("api.blockchair")>-1)?P=P.replace("AccountAddress",x):P+=x,e.next=12,fetch(P);case 12:if(200!==(I=e.sent).status){e.next=31;break}return e.next=16,I.json();case 16:if(!(1==(y=e.sent).status||y.success||0==y.status||null!=y.context&&200==y.context.code)){e.next=28;break}R=[],j=["0x0000000000000000000000000000000000000000"].concat(k),C=v+O,"CN"==S&&(C="以太币"),N?(L=y.data[x.toLowerCase()].layer_2.erc_20,R.push({symbol:w,name:C,balance:Object(A.a)(_).times(Object(A.a)(10).pow(18)).toString(10),displayBalance:_,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),L.forEach((function(e){if(Object(A.a)(e.balance).div(Object(A.a)(10).pow(parseInt(e.token_decimals))).toNumber()>0){var t={name:e.token_name,symbol:e.token_symbol,decimals:e.token_decimals,balance:e.balance,displayBalance:Object(A.a)(e.balance).div(Object(A.a)(10).pow(parseInt(e.token_decimals))).toString(10),contractAddress:e.token_address};R.push(t),k.includes(t.contractAddress.toLowerCase())||j.push(t.contractAddress.toLowerCase())}}))):(R.push({symbol:w,name:C,balance:Object(A.a)(_).times(Object(A.a)(10).pow(18)).toString(10),displayBalance:_,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),y.result.forEach((function(e){var t={name:e.name,symbol:e.symbol,decimals:e.decimals,balance:e.balance,displayBalance:Object(A.a)(e.balance).div(Object(A.a)(10).pow(parseInt(e.decimals))).toString(10),contractAddress:e.contractAddress};R.push(t),k.includes(t.contractAddress.toLowerCase())||j.push(t.contractAddress.toLowerCase())}))),R.sort((function(a,b){return j.indexOf(a.contractAddress)-j.indexOf(b.contractAddress)})),o("SAVE_TOKENS",R),o("SET_FETCHING",!1),e.next=29;break;case 28:throw Error("Fetch tokens failed");case 29:e.next=32;break;case 31:throw Error("Fetch tokens failed");case 32:e.next=39;break;case 34:e.prev=34,e.t0=e.catch(6),console.error(e.t0),l++,c("fetchTokenList",{oracleIndex:l});case 39:e.next=45;break;case 41:(R=[]).push({symbol:w,name:v+O,balance:Object(A.a)(_).times(Object(A.a)(10).pow(18)).toString(10),displayBalance:_,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),o("SAVE_TOKENS",R),o("SET_FETCHING",!1);case 45:case"end":return e.stop()}}),e,null,[[6,34]])}))),function(e,t){return I.apply(this,arguments)}),fetchGasPrice:(N=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d,m,l,f,h,w,v,k,E,T,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,d=t.rootGetters,t.state,m=r.oracleIndex,l=void 0===m?0:m,f=d["metamask/networkConfig"],h=f.smartContractPollTime,w=f.gasPrice,v=f.gasOracleUrls,k=n.metamask.netId,e.prev=4,1!==k){e.next=26;break}return e.next=8,fetch(v[l%v.length]);case 8:if(200!==(E=e.sent).status){e.next=22;break}return e.next=12,E.json();case 12:T=e.sent,x=O({},w),T.slow&&(x.slow=Number(T.slow)+.5),T.safeLow&&(x.slow=Number(T.safeLow)+.5),T.fast&&(x.fast=Number(T.fast)),T.standard&&(x.standard=Number(T.standard)),T.instant&&(x.instant=Number(T.instant)),o("SAVE_GAS_PRICE",x),e.next=23;break;case 22:throw Error("Fetch gasPrice failed");case 23:setTimeout((function(){return c("fetchGasPrice",{})}),1e3*h),e.next=27;break;case 26:o("SAVE_GAS_PRICE",w);case 27:e.next=34;break;case 29:e.prev=29,e.t0=e.catch(4),console.error(e.t0),l++,setTimeout((function(){return c("fetchGasPrice",{oracleIndex:l})}),1e3*h);case 34:case"end":return e.stop()}}),e,null,[[4,29]])}))),function(e,t){return N.apply(this,arguments)}),getTransactionReceipt:(P=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,c=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(o.a)(regeneratorRuntime.mark((function o(d){var m,l,f,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return m=d.retryAttempt,l=void 0===m?1:m,l++,o.prev=2,f={method:"eth_getTransactionReceipt",params:[c]},o.next=6,n("metamask/sendAsync",f,{root:!0});case 6:h=o.sent,e(h),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),l>=2?t(o.t0):r({retryAttempt:l});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return P.apply(this,arguments)}),getTransactionCount:(S=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,address=r.address,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(o.a)(regeneratorRuntime.mark((function o(c){var d,m,l,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=c.retryAttempt,m=void 0===d?1:d,m++,o.prev=2,l={method:"eth_getTransactionCount",params:[address,"latest"]},o.next=6,n("metamask/sendAsync",l,{root:!0});case 6:f=o.sent,e(f),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),m>=2?t(o.t0):r({retryAttempt:m});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)}),sendAsync:function(e,t){var r=e.state,n=e.getters,c=t.method,d=t.from,m=t.params;switch(n.netId){case 77:case 99:break;case 100:d=void 0}return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,o){var l,f,h,w,v,k,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEthereumProvider();case 2:if(l=e.sent,console.log("sendAsync `method, from, params`",c,d,m),!1,"walletConnect"!=r.providerName){e.next=47;break}return e.prev=6,e.next=9,l.getWalletConnector();case 9:return f=e.sent,e.next=12,n.web3();case 12:if(e.sent,"eth_sendTransaction"!=c){e.next=22;break}return"gas"in(h=m[0])&&(h.gasLimit=h.gas,delete h.gas),console.info(h),e.next=19,f.sendTransaction(h);case 19:w=e.sent,console.info(w),t(w);case 22:if("eth_signTransaction"!=c){e.next=27;break}return e.next=25,f.signTransaction(txParam);case 25:v=e.sent,t(v);case 27:if("eth_signTypedData_v3"!=c){e.next=35;break}return e.next=30,f.signTypedData(m);case 30:k=e.sent,console.info(k),t(k),e.next=39;break;case 35:return e.next=37,l.send({jsonrpc:"2.0",id:1314,method:c,params:m,from:d});case 37:(E=e.sent).error?o(E.error):t(E.result);case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(6),console.info(e.t0),o("Send RPC by walletConnect failed");case 45:e.next=48;break;case 47:try{"walletLink"==r.providerName&&"eth_signTypedData_v3"==c&&(m=[m[0],JSON.parse(m[1])]),l.sendAsync({id:520,method:c,params:m,jsonrpc:"2.0",from:d},(function(e,r){e&&o(e),r.error?o(r.error):t(r.result)}))}catch(e){l.send({id:520,method:c,params:m,jsonrpc:"2.0",from:d},(function(e,r){e&&o(e),r.error?o(r.error):t(r.result)}))}case 48:case"end":return e.stop()}}),e,null,[[6,41]])})));return function(t,r){return e.apply(this,arguments)}}())},sendAsync_custom:function(e,t){e.state;var r=e.getters,n=t.method,c=t.from,d=t.params;switch(r.netId){case 77:case 99:break;case 100:c=void 0}return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,o){var m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.customRPCWeb3();case 2:return m=e.sent,console.info(m.currentProvider),e.next=6,r.customRPCProvider();case 6:l=e.sent,console.info(l),console.log("sendAsync `method, from, params`",n,c,d),m.currentProvider.send({method:n,params:d,jsonrpc:"2.0"},(function(e,r){console.info(r),console.info(e),e&&o(e),r.error?o(r.error):t(r.result)}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}};t.default={namespaced:!0,state:function(){return{ethAccount:null,netId:1,currency:"ETH",domainData:{},balance:"0",initialized:!1,address:{value:null,valid:!1},gasPrice:{fast:1,low:1,standard:1},providerName:"",networkName:"",tokens:[],tokensForTestnet:[],tokenAddress:"",isFetching:!0,ethCoinName:" Ethereum Native Currency",walletState:1,isImToken:!1,isTrustWallet:!1,isMetamask:!0,walletName:""}},getters:j,mutations:C,actions:L}},976:function(e,t,r){"use strict";r.r(t);r(73),r(56),r(38),r(45),r(223);var n,o=r(1),c=(r(102),r(126),r(150),r(91),r(92),r(35),r(447),r(74),r(41),r(0)),d=r(90),m=r.n(d),l=r(348),f=r.n(l),h=r(275),w=r.n(h),v=r(282),k=r.n(v),E=r(283),T=r.n(E),x=r(284),A=r.n(x),_=r(5),O=r(66),S=r(4);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I,y,R,j,C,L,D,W,B,G,F,M,H,U=function(e){var t=e.newAccount;(0,e.commit)("IDENTIFY",Object(_.toChecksumAddress)(t[0])),window.location.reload()},V={netId:function(e){return e.netId},isApiValible:function(e){return 1==e.netId},networkName:function(e){return O.a["netId".concat(e.netId)].networkName},currency:function(e){return O.a["netId".concat(e.netId)].currencyName},networkConfig:function(e){return O.a["netId".concat(e.netId)]},getEthereumProvider:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,m,l,h,v,E,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.providerName,n=e.networkName,t.t0=r,t.next="portis"===t.t0?4:"fortmatic"===t.t0?10:"squarelink"===t.t0?13:"walletConnect"===t.t0?18:"walletLink"===t.t0?26:("mewConnect"===t.t0||t.t0,38);break;case 4:if(!window.portis){t.next=8;break}return t.abrupt("return",window.portis.provider);case 8:return window.portis=new k.a("",n),t.abrupt("return",window.portis.provider);case 10:return o=new A.a("pk_live_16BBFE98905B1AA1"),t.abrupt("return",o.getProvider());case 13:return c=new T.a("",n),t.next=16,c.getProvider();case 16:return d=t.sent,t.abrupt("return",d);case 18:if(!window.walletProviderForBulksender){t.next=20;break}return t.abrupt("return",window.walletProviderForBulksender);case 20:for(l in m={},O.a)h=parseInt(l.replace("netId","")),m[h]=O.a[l].rpcUrl;return v=new f.a({rpc:m,bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:15e3}),window.walletProviderForBulksender=v,t.abrupt("return",v);case 26:if(!window.walletLinkForBulksender){t.next=30;break}return t.abrupt("return",window.walletLinkForBulksender);case 30:return"Token Bulksender","https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png",1,E=new w.a({appName:"Token Bulksender",appLogoUrl:"https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png",darkMode:!1}),x=E.makeWeb3Provider("https://api.mycryptoapi.com/eth",1),window.walletLinkForBulksender=x,t.abrupt("return",x);case 37:return t.abrupt("break",39);case 38:return t.abrupt("return",window.ethereum);case 39:case"end":return t.stop()}}),t)})))},customRPCProvider:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new m.a.providers.HttpProvider(r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},web3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEthereumProvider();case 2:return r=e.sent,e.abrupt("return",Object.freeze(new m.a(r)));case 4:case"end":return e.stop()}}),e)})))},customRPCWeb3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new m.a.providers.HttpProvider(r),e.abrupt("return",Object.freeze(new m.a(n)));case 3:case"end":return e.stop()}}),e)})))}},K={IDENTIFY:function(e,t){e.ethAccount=t},SET_NET_ID:function(e,t){t=parseInt(t,10),e.netId=t},SET_BALANCE:function(e,t){e.balance=Object(_.fromWei)(t)},SET_WALLET_STATE:function(e,t){e.walletState=t},SET_ADDRESS:function(e,t){var address=t.address,r=t.valid,n=void 0!==r&&r;e.address={value:address,valid:n}},SAVE_GAS_PRICE:function(e,t){e.gasPrice=t},SET_GAS_PRICE_ORACLE_LOCKED:function(e,t){e.gasPriceOracleLocked=t},SAVE_TOKENS:function(e,t){e.tokens=t},SET_TOKEN_ADDRESS:function(e,t){e.tokenAddress=t},SET_FETCHING:function(e,t){e.isFetching=t},SET_PROVIDER_NAME:function(e,t){e.providerName=t},SET_NETWORK_NAME:function(e,t){e.networkName=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_IS_IMTOKEN:function(e,t){e.isImToken=t},SET_IS_TRUSTWALLET:function(e,t){e.isTrustWallet=t},SET_WALLET_NAME:function(e,t){e.walletName=t},SAVE_ETH_PRICE:function(e,t){e.ethPrice=t},SET_ETH_PRICE_LOADED:function(e,t){e.ethPriceLoaded=t}},Y=(n={setAddress:function(e,t){e.dispatch;var r=e.commit,address=t.address;r("SET_ADDRESS",{address:address,valid:address.length>=42&&Object(_.isAddress)(address)})},setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setWalletName:function(e,t){var r=e.dispatch,n=e.commit,o=t.walletName;n("SET_WALLET_NAME",o),r("common/saveLastUsedWalletName",{walletName:o},{root:!0})},onNetworkChanged:function(e,t){(0,e.commit)("SET_NET_ID",t.netId)},onChainIdChanged:function(e,t){var r=e.commit,n=t.chainId;r("SET_NET_ID",Object(_.hexToNumber)(n))},closeProvider:(H=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,n=t.getters,o=t.commit,c=r.providerName,e.next=4,n.getEthereumProvider();case 4:d=e.sent,e.t0=c,e.next="walletConnect"===e.t0?8:"walletLink"===e.t0?11:"mewConnect"===e.t0?14:17;break;case 8:return e.next=10,d.close();case 10:window.walletProviderForBulksender=void 0;case 11:return e.next=13,d.close();case 13:window.walletLinkForBulksender=void 0;case 14:return e.next=16,d.disconnect();case 16:window.connectMewForBulksender=void 0;case 17:return e.abrupt("break",18);case 18:return o("IDENTIFY",null),o("SET_PROVIDER_NAME",""),o("SET_WALLET_NAME",""),e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),getBalance:function(e){var t=e.dispatch,r=e.state,n=e.getters.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,o){var d=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var l,f,h,w;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=m.retryAttempt,f=void 0===l?1:l,f++,c.prev=2,h={method:"eth_getBalance",params:[r.ethAccount,"latest"]},c.next=6,t("metamask/sendAsync",h,{root:!0});case 6:w=c.sent,e(w),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),f>=n?o(c.t0):d({retryAttempt:f});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();d({})}))},askPermission:function(e,t){var r=e.commit,n=e.dispatch,o=e.getters,d=(e.state,t.providerName),m=t.networkName;return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var l,f,h,w,v,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROVIDER_NAME",d),r("SET_NETWORK_NAME",m),r("SET_INITIALIZED",!1),e.next=5,o.getEthereumProvider();case 5:return l=e.sent,e.prev=6,null==l&&(r("SET_WALLET_STATE",-1),c(new Error("Please Install Metamask"))),f=[],e.prev=9,e.next=12,l.enable();case 12:f=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(9),e.next=19,l.request({method:"eth_requestAccounts"});case 19:f=e.sent;case 20:return 0===f.length&&(r("SET_WALLET_STATE",-2),c(new Error("lockedMetamask"))),h=Object(_.toChecksumAddress)(f[0]),r("IDENTIFY",h),n("setAddress",{address:h}),e.next=26,n("getBalance");case 26:return w=e.sent,w=Object(_.hexToNumberString)(w),n("saveUserBalance",{balance:w}),e.next=31,n("sendAsync",{method:"eth_chainId",params:[]});case 31:v=e.sent,k=Object(_.hexToNumber)(v),n("onNetworkChanged",{netId:k});try{(window.imToken||window.ethereum.isImToken)&&r("SET_IS_IMTOKEN",!0),null!=window.trustProvider&&r("SET_IS_TRUSTWALLET",!0),l.on&&(l.on("accountsChanged",(function(e){return U({dispatch:n,commit:r,newAccount:e})})),l.on("chainChanged",(function(e){return window.location.reload()})),l.on("networkChanged",(function(e){return n("onNetworkChanged",{netId:e})})),l.on("open",(function(){console.info("open")})),l.on("close",(function(code,e){console.info(code,e)})))}catch(e){console.info(e)}return r("SET_INITIALIZED",!0),e.next=38,n("common/saveLastUsedProviderName",{providerName:d},{root:!0});case 38:return e.next=40,n("fetchTokenList",{});case 40:n("bulksender/initBaseParams",{},{root:!0}),n("common/initBaseParams",{},{root:!0}),n("token/initBaseParams",{},{root:!0}),n("fetchCoinPrice"),t({netId:k,ethAccount:f[0]}),e.next=50;break;case 47:e.prev=47,e.t1=e.catch(6),c(e.t1);case 50:case"end":return e.stop()}}),e,null,[[6,47],[9,15]])})));return function(t,r){return e.apply(this,arguments)}}())},saveUserBalance:function(e,t){(0,e.commit)("SET_BALANCE",t.balance)},fetchETHBalance:(M=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,r("getBalance");case 4:n=e.sent,n=Object(_.hexToNumberString)(n),r("saveUserBalance",{balance:n}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e){return M.apply(this,arguments)}),fetchTokenList:(F=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d,m,l,f,h,w,v,k,E,T,x,A,_,O,P,N,I,y,R,j,C,L,D,W,B;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,d=t.rootGetters,t.state,m=r.oracleIndex,l=void 0===m?0:m,(f=d["metamask/networkConfig"]).smartContractPollTime,f.gasPrice,h=f.tokenOracleUrls,w=f.currencyName,v=f.networkName,k=f.specialTokenList,E=f.supportTokensAPI,T=n.metamask,x=T.netId,T.isFetching,A=T.ethAccount,T.tokens,_=T.balance,O=T.ethCoinName,P=n.common.language,!E){e.next=48;break}if(e.prev=6,l!=h.length){e.next=12;break}return e.next=10,c("setDefaultTokenList");case 10:e.next=39;break;case 12:return N=1==x,I=h[l%h.length],y=I.indexOf("api.covalenthq")>-1,I=I.replace("{chain_id}",x).replace("{address}",A),e.next=18,fetch(I);case 18:if(200!==(R=e.sent).status){e.next=38;break}return e.next=22,R.json();case 22:if(!(1==(j=e.sent).status||0==j.error||j.success||0==j.status||null!=j.context&&200==j.context.code||j.hasOwnProperty("tokens"))){e.next=35;break}C=[],L=["0x0000000000000000000000000000000000000000"].concat(k),D=v+O,"CN"==P&&N&&(D="以太币"),C.push({symbol:w,name:D,balance:Object(S.a)(_).times(Object(S.a)(10).pow(18)).toString(10),displayBalance:_,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),y?(W=j.data.items,B=0,W.forEach((function(e){if(B>0){var t={name:e.contract_name,symbol:e.contract_ticker_symbol,decimals:e.contract_decimals,balance:e.balance,displayBalance:Object(S.a)(e.balance).div(Object(S.a)(10).pow(parseInt(e.contract_decimals))).toString(10),contractAddress:e.contract_address};C.push(t),k.includes(t.contractAddress.toLowerCase())||L.push(t.contractAddress.toLowerCase())}B+=1}))):j.tokens.forEach((function(e){var t=e.tokenInfo,r={name:t.name,symbol:t.symbol,decimals:t.decimals,balance:e.balance,displayBalance:Object(S.a)(e.balance).div(Object(S.a)(10).pow(parseInt(t.decimals))).toString(10),contractAddress:t.address};C.push(r),k.includes(r.contractAddress.toLowerCase())||L.push(r.contractAddress.toLowerCase())})),C.sort((function(a,b){return L.indexOf(a.contractAddress)-L.indexOf(b.contractAddress)})),o("SAVE_TOKENS",C),o("SET_FETCHING",!1),e.next=36;break;case 35:throw Error("Fetch tokens failed");case 36:e.next=39;break;case 38:throw Error("Fetch tokens failed");case 39:e.next=46;break;case 41:e.prev=41,e.t0=e.catch(6),console.error(e.t0),l++,c("fetchTokenList",{oracleIndex:l});case 46:e.next=50;break;case 48:return e.next=50,c("setDefaultTokenList");case 50:case"end":return e.stop()}}),e,null,[[6,41]])}))),function(e,t){return F.apply(this,arguments)}),setDefaultTokenList:(G=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,d,m,l,f,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.rootState,n=t.commit,t.dispatch,o=t.rootGetters,t.state,(c=o["metamask/networkConfig"]).smartContractPollTime,c.gasPrice,c.tokenOracleUrls,d=c.currencyName,m=c.networkName,c.specialTokenList,(l=r.metamask).netId,l.isFetching,l.ethAccount,l.tokens,f=l.balance,h=l.ethCoinName,r.common.language,(w=[]).push({symbol:d,name:m+h,balance:Object(S.a)(f).times(Object(S.a)(10).pow(18)).toString(10),displayBalance:f,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),n("SAVE_TOKENS",w),n("SET_FETCHING",!1);case 8:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)}),fetchGasPrice:(B=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d,m,l,f,h,w,v,k,E,T,x,A,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,d=t.rootGetters,m=t.state,l=r.oracleIndex,f=void 0===l?0:l,h=d["metamask/networkConfig"],w=h.smartContractPollTime,v=h.gasPrice,k=h.gasOracleUrls,E=h.useRPCGasPrice,T=n.metamask.netId,!m.gasPriceOracleLocked){e.next=8;break}return console.info("GasPrice Oracle locked"),setTimeout((function(){return c("fetchGasPrice",{})}),1e3*w),e.abrupt("return");case 8:if(e.prev=8,1!==T&&137!==T&&80001!==T&&56!==T){e.next=39;break}return e.next=12,fetch(k[f%k.length]);case 12:if(200!==(x=e.sent).status){e.next=35;break}return e.next=16,x.json();case 16:(A=e.sent).hasOwnProperty("data")&&(A=A.data),O=N({},v),A.slow&&(O.slow=Number(A.slow),Number(A.slow)>Number(Object(_.toWei)("0.001","gwei"))&&(O.slow=Math.ceil(Number(Object(_.fromWei)(Number(A.slow).toString(),"gwei"))))),A.safeLow&&(O.slow=Number(A.safeLow)),A.fast&&(O.fast=Number(A.fast),Number(A.fast)>Number(Object(_.toWei)("0.001","gwei"))&&(O.fast=Math.ceil(Number(Object(_.fromWei)(Number(A.fast).toString(),"gwei"))))),A.standard&&(O.standard=Number(A.standard),Number(A.standard)>Number(Object(_.toWei)("0.001","gwei"))&&(O.standard=Math.ceil(Number(Object(_.fromWei)(Number(A.standard).toString(),"gwei"))))),A.instant&&(O.instant=Number(A.instant)),A.fastest&&(O.instant=Number(A.fastest)),A.rapid&&(O.instant=Number(A.rapid),Number(A.rapid)>Number(Object(_.toWei)("0.001","gwei"))&&(O.instant=Math.ceil(Number(Object(_.fromWei)(Number(A.rapid).toString(),"gwei"))))),O.slow+=1,1===T&&(O.standard+=1),O.fast+=1,O.standard==O.fast&&(O.fast+=2),O.instant<=O.fast&&(O.instant=O.fast+4),o("SAVE_GAS_PRICE",O),e.next=36;break;case 35:throw Error("Fetch gasPrice failed");case 36:setTimeout((function(){return c("fetchGasPrice",{})}),1e3*w),e.next=45;break;case 39:if(null==E||!E){e.next=44;break}return e.next=42,c("buildChainGasPriceFromRpc");case 42:e.next=45;break;case 44:o("SAVE_GAS_PRICE",v);case 45:e.next=52;break;case 47:e.prev=47,e.t0=e.catch(8),console.error(e.t0),f++,setTimeout((function(){return c("fetchGasPrice",{oracleIndex:f})}),1e3*w);case 52:case"end":return e.stop()}}),e,null,[[8,47]])}))),function(e,t){return B.apply(this,arguments)}),updateGasPrice:(W=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return W.apply(this,arguments)}),buildChainGasPriceFromRpc:(D=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,d,m,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,r=t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r["metamask/networkConfig"].gasPrice,e.prev=2,e.next=5,n("fetchGasPriceFromChain");case 5:d=e.sent,m=Object(_.hexToNumberString)(d),l=Math.ceil(Number(Object(_.fromWei)(m,"gwei"))),(f=N({},m)).slow=l+1,f.standard=l,f.fast=f.standard+5,f.instant=f.fast+10,o("SAVE_GAS_PRICE",f),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.info(e.t0),o("SAVE_GAS_PRICE",c);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),function(e){return D.apply(this,arguments)}),fetchGasPriceFromChain:(L=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var o=function(){var d=Object(c.a)(regeneratorRuntime.mark((function c(d){var m,l,f,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m=d.retryAttempt,l=void 0===m?1:m,l++,c.prev=2,f={from:r.ethAccount,method:"eth_gasPrice",params:[]},c.next=6,n("metamask/sendAsync",f,{root:!0});case 6:h=c.sent,e(h),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),l>=2?t(c.t0):o({retryAttempt:l});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();o({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),fetchCoinPrice:(C=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,d,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,t.dispatch,o=t.rootGetters,t.state,(d=o["metamask/networkConfig"]).smartContractPollTime,m=d.extraFeeOracle,l=d.supportExtraFee,r.metamask.netId,l){e.next=6;break}return n("SET_ETH_PRICE_LOADED",!0),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=function(){var o=Object(c.a)(regeneratorRuntime.mark((function o(c){var d,l,f,h,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=c.retryAttempt,l=void 0===d?1:d,l++,o.prev=2,o.next=5,fetch(m.coinPriceUrl);case 5:if(200!==(f=o.sent).status){o.next=17;break}return o.next=9,f.json();case 9:h=o.sent,w=0,h.hasOwnProperty(m.coinId)&&(w=h[m.coinId].usd),n("SAVE_ETH_PRICE",w),n("SET_ETH_PRICE_LOADED",!0),e(w),o.next=18;break;case 17:throw Error("Fetch coin price failed");case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(2),l>=5?t(o.t0):r({retryAttempt:l});case 23:case"end":return o.stop()}}),o,null,[[2,20]])})));return function(e){return o.apply(this,arguments)}}();r({})})));case 8:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},Object(o.a)(n,"updateGasPrice",(j=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})),Object(o.a)(n,"lockGasPriceOracle",(R=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPriceOracleLocked,n("SET_GAS_PRICE_ORACLE_LOCKED",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)})),Object(o.a)(n,"getTransactionReceipt",(y=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,d=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var l,f,h,w;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=m.retryAttempt,f=void 0===l?1:l,f++,c.prev=2,h={from:n.ethAccount,method:"eth_getTransactionReceipt",params:[d]},c.next=6,o("metamask/sendAsync",h,{root:!0});case 6:w=c.sent,e(w),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),f>=2?t(c.t0):r({retryAttempt:f});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)})),Object(o.a)(n,"getTransactionCount",(I=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,address=r.address,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(c.a)(regeneratorRuntime.mark((function c(d){var m,l,f,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m=d.retryAttempt,l=void 0===m?1:m,l++,c.prev=2,f={from:n.ethAccount,method:"eth_getTransactionCount",params:[address,"latest"]},c.next=6,o("metamask/sendAsync",f,{root:!0});case 6:h=c.sent,e(h),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),l>=2?t(c.t0):r({retryAttempt:l});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)})),Object(o.a)(n,"sendAsync",(function(e,t){var r=e.state,n=e.getters,o=e.rootState,d=t.method,m=t.from,l=t.params;switch(n.netId){case 77:case 99:break;case 100:m=void 0}var f=o.common.isMobile;return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,o){var c,h,w,v,k,E,T,x,A,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEthereumProvider();case 2:if(c=e.sent,!1,"walletConnect"!=r.providerName){e.next=55;break}return e.prev=5,e.next=8,c.getWalletConnector();case 8:return h=e.sent,e.next=11,n.web3();case 11:if(e.sent,"eth_sendTransaction"!=d){e.next=20;break}return w=l[0],e.next=16,h.sendTransaction(w);case 16:return v=e.sent,console.info(v),t(v),e.abrupt("return");case 20:if("eth_signTransaction"!=d){e.next=25;break}return e.next=23,h.signTransaction(txParam);case 23:k=e.sent,t(k);case 25:if("eth_signTypedData_v3"!=d){e.next=34;break}return l=[l[0],l[1]],e.next=29,h.signTypedData(l);case 29:E=e.sent,console.info(E),t(E),e.next=38;break;case 34:return e.next=36,c.send({id:1314,method:d,params:l,jsonrpc:"2.0",from:m});case 36:(T=e.sent)?t(T):o("get result by walletConnect failed");case 38:e.next=53;break;case 40:return e.prev=40,e.t0=e.catch(5),console.info(e.t0,d),e.prev=43,e.next=46,c.send({id:1314,method:d,params:l,jsonrpc:"2.0"});case 46:(x=e.sent)?t(x):o("Send RPC by walletConnect failed"),e.next=53;break;case 50:e.prev=50,e.t1=e.catch(43),o("Send RPC by walletConnect failed");case 53:e.next=56;break;case 55:try{"walletLink"==r.providerName&&"eth_signTypedData_v3"==d&&(l=[l[0],JSON.parse(l[1])]),A={id:520,method:d,params:l,jsonrpc:"2.0",from:m},f&&delete A.from,c.sendAsync(A,(function(e,r){e&&o(e),r.error?o(r.error):t(r.result)}))}catch(e){_={id:520,method:d,params:l,jsonrpc:"2.0",from:m},f&&delete _.from;try{c.send(_,(function(e,r){e&&o(e),r.error?o(r.error):t(r.result)}))}catch(e){c.request(_).then((function(e){t(e)})).catch((function(e){o(e)}))}}case 56:case"end":return e.stop()}}),e,null,[[5,40],[43,50]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(o.a)(n,"sendAsync_custom",(function(e,t){e.state;var r=e.getters,n=t.method,o=t.from,d=t.params;switch(r.netId){case 77:case 99:break;case 100:o=void 0}return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.customRPCWeb3();case 2:return m=e.sent,console.info(m.currentProvider),e.next=6,r.customRPCProvider();case 6:l=e.sent,console.info(l),console.log("sendAsync `method, from, params`",n,o,d),m.currentProvider.send({method:n,params:d,jsonrpc:"2.0"},(function(e,r){console.info(r),console.info(e),e&&c(e),r.error?c(r.error):t(r.result)}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})),n);t.default={namespaced:!0,state:function(){return{ethAccount:null,netId:1,currency:"ETH",domainData:{},balance:"0",initialized:!1,address:{value:null,valid:!1},gasPrice:{fast:1,low:1,standard:1,instant:1},gasPriceOracleLocked:!1,providerName:"",networkName:"",tokens:[],tokensForTestnet:[],tokenAddress:"",isFetching:!0,ethCoinName:" Native Currency",walletState:1,isImToken:!1,isTrustWallet:!1,isMetamask:!0,walletName:"",ethPrice:0,ethPriceLoaded:!1}},getters:V,mutations:K,actions:Y}}},[[1145,80,64,67,63,65,66,57,19,35,54,38,51,0,24,15,16,10,31,17,2,12,23,41,20,36,8,55,30,47,59,11,32,40,48,27,26,56,9,28,61,33,58,21,53,29,46,5,44,49,34,37,25,50,62,39,52,42,13,45,18,4,22,3,60,6,14,43,7]]]);